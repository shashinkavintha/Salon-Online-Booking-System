import{c as De,a as f,h as d,b as vt,g as Me,m as Ll,a4 as Ne,C as ll,E as al,n as Nl,r as I,w as he,e as Oe,ay as Hl,az as nl,aA as Fl,aB as Pl,d as Mt,O as jl,P as Ul,l as bl,o as ol,N as il,aC as ul,aD as rl,aE as sl,aF as cl,au as Rl,aG as Al,aH as Ot,aI as Ql,aJ as yt,aK as Kl,x as Tt,A as Ke,aL as Wl,aM as Yl,y as et,aN as Xl,ak as zt,aO as Gl,aP as Jl,aQ as Zl,aR as yl,aS as Jt,aT as Sl,aw as ea,aU as ta,ah as Qt,aV as dt,a3 as X,aa as Zt,s as la,aW as aa,aX as na,ab as me,$ as oa,Y as Be,Z as se,_,a2 as ue,a1 as S,a8 as rt,J as Ze,ai as pe,a6 as Te,a5 as Se,aj as qt,ac as Ft,a9 as hl,ad as ia,ae as Kt,af as st,ag as ze,am as Wt}from"./index-CMT74Q4T.js";import{Q as Bl,b as Le,a as wt,c as Qe,C as Yt}from"./ClosePopup-RBC3baXK.js";import{a as dl,Q as wl}from"./QChip-Brbls3Hv.js";import{Q as ua}from"./QMenu-lcGQE2z6.js";import{n as Cl,h as ra}from"./format-DzAyxiRj.js";import{_ as sa,Q as ca}from"./_plugin-vue_export-helper-62hkQCkb.js";import{d as Pt,u as da}from"./useNotifications-BBV-vu6O.js";import{u as fa}from"./use-quasar-9Xk404GY.js";const $e=De({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:a}){const o=Me(),m=f(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return d("td",{class:m.value},vt(a.default));const s=o.vnode.key,r=(e.props.colsMap!==void 0?e.props.colsMap[s]:null)||e.props.col;if(r===void 0)return;const{row:g}=e.props;return d("td",{class:m.value+r.__tdClass(g),style:r.__tdStyle(g)},vt(a.default))}}}),va=De({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:a,emit:o}){const m=Me(),{proxy:{$q:s}}=m,r=g=>{o("click",g)};return()=>{if(e.props===void 0)return d("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:r},vt(a.default));let g,v;const b=m.vnode.key;if(b){if(g=e.props.colsMap[b],g===void 0)return}else g=e.props.col;if(g.sortable===!0){const u=g.align==="right"?"unshift":"push";v=Ll(a.default,[]),v[u](d(Ne,{class:g.__iconClass,name:s.iconSet.table.arrowUp}))}else v=vt(a.default);const F={class:g.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:g.headerStyle,onClick:u=>{g.sortable===!0&&e.props.sort(g),r(u)}};return d("th",F,v)}}}),ma=["horizontal","vertical","cell","none"],ga=De({name:"QMarkupTable",props:{...ll,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:e=>ma.includes(e)}},setup(e,{slots:a}){const o=Me(),m=al(e,o.proxy.$q),s=f(()=>`q-markup-table q-table__container q-table__card q-table--${e.separator}-separator`+(m.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(e.dense===!0?" q-table--dense":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")+(e.square===!0?" q-table--square":"")+(e.wrapCells===!1?" q-table--no-wrap":""));return()=>d("div",{class:s.value},[d("table",{class:"q-table"},vt(a.default))])}});function Tl(e,a){return d("div",e,[d("table",{class:"q-table"},a)])}let Dt=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const a=document.createElement("div");Object.assign(a.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(a),e.scrollLeft=-1e3,Dt=e.scrollLeft>=0,e.remove()}const Ae=1e3,ba=["start","center","end","start-force","center-force","end-force"],zl=Array.prototype.filter,ya=window.getComputedStyle(document.body).overflowAnchor===void 0?Nl:function(e,a){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const o=e.children||[];zl.call(o,s=>s.dataset&&s.dataset.qVsAnchor!==void 0).forEach(s=>{delete s.dataset.qVsAnchor});const m=o[a];m?.dataset&&(m.dataset.qVsAnchor="")}))};function ft(e,a){return e+a}function Xt(e,a,o,m,s,r,g,v){const b=e===window?document.scrollingElement||document.documentElement:e,F=s===!0?"offsetWidth":"offsetHeight",u={scrollStart:0,scrollViewSize:-g-v,scrollMaxSize:0,offsetStart:-g,offsetEnd:-v};if(s===!0?(e===window?(u.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,u.scrollViewSize+=document.documentElement.clientWidth):(u.scrollStart=b.scrollLeft,u.scrollViewSize+=b.clientWidth),u.scrollMaxSize=b.scrollWidth,r===!0&&(u.scrollStart=(Dt===!0?u.scrollMaxSize-u.scrollViewSize:0)-u.scrollStart)):(e===window?(u.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,u.scrollViewSize+=document.documentElement.clientHeight):(u.scrollStart=b.scrollTop,u.scrollViewSize+=b.clientHeight),u.scrollMaxSize=b.scrollHeight),o!==null)for(let h=o.previousElementSibling;h!==null;h=h.previousElementSibling)h.classList.contains("q-virtual-scroll--skip")===!1&&(u.offsetStart+=h[F]);if(m!==null)for(let h=m.nextElementSibling;h!==null;h=h.nextElementSibling)h.classList.contains("q-virtual-scroll--skip")===!1&&(u.offsetEnd+=h[F]);if(a!==e){const h=b.getBoundingClientRect(),q=a.getBoundingClientRect();s===!0?(u.offsetStart+=q.left-h.left,u.offsetEnd-=q.width):(u.offsetStart+=q.top-h.top,u.offsetEnd-=q.height),e!==window&&(u.offsetStart+=u.scrollStart),u.offsetEnd+=u.scrollMaxSize-u.offsetStart}return u}function pl(e,a,o,m){a==="end"&&(a=(e===window?document.body:e)[o===!0?"scrollWidth":"scrollHeight"]),e===window?o===!0?(m===!0&&(a=(Dt===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-a),window.scrollTo(a,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,a):o===!0?(m===!0&&(a=(Dt===!0?e.scrollWidth-e.offsetWidth:0)-a),e.scrollLeft=a):e.scrollTop=a}function St(e,a,o,m){if(o>=m)return 0;const s=a.length,r=Math.floor(o/Ae),g=Math.floor((m-1)/Ae)+1;let v=e.slice(r,g).reduce(ft,0);return o%Ae!==0&&(v-=a.slice(r*Ae,o).reduce(ft,0)),m%Ae!==0&&m!==s&&(v-=a.slice(m,g*Ae).reduce(ft,0)),v}const Ol={virtualScrollSliceSize:{type:[Number,String],default:10},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Dl=Object.keys(Ol),el={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Ol};function Ml({virtualScrollLength:e,getVirtualScrollTarget:a,getVirtualScrollEl:o,virtualScrollItemSizeComputed:m}){const s=Me(),{props:r,emit:g,proxy:v}=s,{$q:b}=v;let F,u,h,q=[],P;const B=I(0),k=I(0),R=I({}),$=I(null),w=I(null),E=I(null),T=I({from:0,to:0}),K=f(()=>r.tableColspan!==void 0?r.tableColspan:100);m===void 0&&(m=f(()=>r.virtualScrollItemSize));const A=f(()=>m.value+";"+r.virtualScrollHorizontal),G=f(()=>A.value+";"+r.virtualScrollSliceRatioBefore+";"+r.virtualScrollSliceRatioAfter);he(G,()=>{de()}),he(A,oe);function oe(){fe(u,!0)}function Q(c){fe(c===void 0?u:c)}function j(c,C){const H=a();if(H==null||H.nodeType===8)return;const W=Xt(H,o(),$.value,w.value,r.virtualScrollHorizontal,b.lang.rtl,r.virtualScrollStickySizeStart,r.virtualScrollStickySizeEnd);h!==W.scrollViewSize&&de(W.scrollViewSize),ie(H,W,Math.min(e.value-1,Math.max(0,parseInt(c,10)||0)),0,ba.indexOf(C)!==-1?C:u!==-1&&c>u?"end":"start")}function ce(){const c=a();if(c==null||c.nodeType===8)return;const C=Xt(c,o(),$.value,w.value,r.virtualScrollHorizontal,b.lang.rtl,r.virtualScrollStickySizeStart,r.virtualScrollStickySizeEnd),H=e.value-1,W=C.scrollMaxSize-C.offsetStart-C.offsetEnd-k.value;if(F===C.scrollStart)return;if(C.scrollMaxSize<=0){ie(c,C,0,0);return}h!==C.scrollViewSize&&de(C.scrollViewSize),we(T.value.from);const y=Math.floor(C.scrollMaxSize-Math.max(C.scrollViewSize,C.offsetEnd)-Math.min(P[H],C.scrollViewSize/2));if(y>0&&Math.ceil(C.scrollStart)>=y){ie(c,C,H,C.scrollMaxSize-C.offsetEnd-q.reduce(ft,0));return}let n=0,l=C.scrollStart-C.offsetStart,D=l;if(l<=W&&l+C.scrollViewSize>=B.value)l-=B.value,n=T.value.from,D=l;else for(let M=0;l>=q[M]&&n<H;M++)l-=q[M],n+=Ae;for(;l>0&&n<H;)l-=P[n],l>-C.scrollViewSize?(n++,D=l):D=P[n]+l;ie(c,C,n,D)}function ie(c,C,H,W,y){const n=typeof y=="string"&&y.indexOf("-force")!==-1,l=n===!0?y.replace("-force",""):y,D=l!==void 0?l:"start";let M=Math.max(0,H-R.value[D]),ee=M+R.value.total;ee>e.value&&(ee=e.value,M=Math.max(0,ee-R.value.total)),F=C.scrollStart;const be=M!==T.value.from||ee!==T.value.to;if(be===!1&&l===void 0){te(H);return}const{activeElement:He}=document,ge=E.value;be===!0&&ge!==null&&ge!==He&&ge.contains(He)===!0&&(ge.addEventListener("focusout",Ce),setTimeout(()=>{ge?.removeEventListener("focusout",Ce)})),ya(ge,H-M);const Ee=l!==void 0?P.slice(M,H).reduce(ft,0):0;if(be===!0){const ke=ee>=T.value.from&&M<=T.value.to?T.value.to:ee;T.value={from:M,to:ke},B.value=St(q,P,0,M),k.value=St(q,P,ee,e.value),requestAnimationFrame(()=>{T.value.to!==ee&&F===C.scrollStart&&(T.value={from:T.value.from,to:ee},k.value=St(q,P,ee,e.value))})}requestAnimationFrame(()=>{if(F!==C.scrollStart)return;be===!0&&we(M);const ke=P.slice(M,H).reduce(ft,0),xe=ke+C.offsetStart+B.value,je=xe+P[H];let We=xe+W;if(l!==void 0){const mt=ke-Ee,Ye=C.scrollStart+mt;We=n!==!0&&Ye<xe&&je<Ye+C.scrollViewSize?Ye:l==="end"?je-C.scrollViewSize:xe-(l==="start"?0:Math.round((C.scrollViewSize-P[H])/2))}F=We,pl(c,We,r.virtualScrollHorizontal,b.lang.rtl),te(H)})}function we(c){const C=E.value;if(C){const H=zl.call(C.children,M=>M.classList&&M.classList.contains("q-virtual-scroll--skip")===!1),W=H.length,y=r.virtualScrollHorizontal===!0?M=>M.getBoundingClientRect().width:M=>M.offsetHeight;let n=c,l,D;for(let M=0;M<W;){for(l=y(H[M]),M++;M<W&&H[M].classList.contains("q-virtual-scroll--with-prev")===!0;)l+=y(H[M]),M++;D=l-P[n],D!==0&&(P[n]+=D,q[Math.floor(n/Ae)]+=D),n++}}}function Ce(){E.value?.focus()}function fe(c,C){const H=1*m.value;(C===!0||Array.isArray(P)===!1)&&(P=[]);const W=P.length;P.length=e.value;for(let n=e.value-1;n>=W;n--)P[n]=H;const y=Math.floor((e.value-1)/Ae);q=[];for(let n=0;n<=y;n++){let l=0;const D=Math.min((n+1)*Ae,e.value);for(let M=n*Ae;M<D;M++)l+=P[M];q.push(l)}u=-1,F=void 0,B.value=St(q,P,0,T.value.from),k.value=St(q,P,T.value.to,e.value),c>=0?(we(T.value.from),Oe(()=>{j(c)})):Z()}function de(c){if(c===void 0&&typeof window<"u"){const l=a();l!=null&&l.nodeType!==8&&(c=Xt(l,o(),$.value,w.value,r.virtualScrollHorizontal,b.lang.rtl,r.virtualScrollStickySizeStart,r.virtualScrollStickySizeEnd).scrollViewSize)}h=c;const C=parseFloat(r.virtualScrollSliceRatioBefore)||0,H=parseFloat(r.virtualScrollSliceRatioAfter)||0,W=1+C+H,y=c===void 0||c<=0?1:Math.ceil(c/m.value),n=Math.max(1,y,Math.ceil((r.virtualScrollSliceSize>0?r.virtualScrollSliceSize:10)/W));R.value={total:Math.ceil(n*W),start:Math.ceil(n*C),center:Math.ceil(n*(.5+C)),end:Math.ceil(n*(1+C)),view:y}}function N(c,C){const H=r.virtualScrollHorizontal===!0?"width":"height",W={["--q-virtual-scroll-item-"+H]:m.value+"px"};return[c==="tbody"?d(c,{class:"q-virtual-scroll__padding",key:"before",ref:$},[d("tr",[d("td",{style:{[H]:`${B.value}px`,...W},colspan:K.value})])]):d(c,{class:"q-virtual-scroll__padding",key:"before",ref:$,style:{[H]:`${B.value}px`,...W}}),d(c,{class:"q-virtual-scroll__content",key:"content",ref:E,tabindex:-1},C.flat()),c==="tbody"?d(c,{class:"q-virtual-scroll__padding",key:"after",ref:w},[d("tr",[d("td",{style:{[H]:`${k.value}px`,...W},colspan:K.value})])]):d(c,{class:"q-virtual-scroll__padding",key:"after",ref:w,style:{[H]:`${k.value}px`,...W}})]}function te(c){u!==c&&(r.onVirtualScroll!==void 0&&g("virtualScroll",{index:c,from:T.value.from,to:T.value.to-1,direction:c<u?"decrease":"increase",ref:v}),u=c)}de();const Z=Hl(ce,b.platform.is.ios===!0?120:35);nl(()=>{de()});let _e=!1;return Fl(()=>{_e=!0}),Pl(()=>{if(_e!==!0)return;const c=a();F!==void 0&&c!==void 0&&c!==null&&c.nodeType!==8?pl(c,F,r.virtualScrollHorizontal,b.lang.rtl):j(u)}),Mt(()=>{Z.cancel()}),Object.assign(v,{scrollTo:j,reset:oe,refresh:Q}),{virtualScrollSliceRange:T,virtualScrollSliceSizeComputed:R,setVirtualScrollSize:de,onVirtualScrollEvt:Z,localResetVirtualScroll:fe,padVirtualScroll:N,scrollTo:j,reset:oe,refresh:Q}}const Sa={list:Bl,table:ga},ha=["list","table","__qtable"],wa=De({name:"QVirtualScroll",props:{...el,type:{type:String,default:"list",validator:e=>ha.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:jl},setup(e,{slots:a,attrs:o}){let m;const s=I(null),r=f(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:g,localResetVirtualScroll:v,padVirtualScroll:b,onVirtualScrollEvt:F}=Ml({virtualScrollLength:r,getVirtualScrollTarget:B,getVirtualScrollEl:P}),u=f(()=>{if(r.value===0)return[];const w=(E,T)=>({index:g.value.from+T,item:E});return e.itemsFn===void 0?e.items.slice(g.value.from,g.value.to).map(w):e.itemsFn(g.value.from,g.value.to-g.value.from).map(w)}),h=f(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),q=f(()=>e.scrollTarget!==void 0?{}:{tabindex:0});he(r,()=>{v()}),he(()=>e.scrollTarget,()=>{R(),k()});function P(){return s.value.$el||s.value}function B(){return m}function k(){m=Ul(P(),e.scrollTarget),m.addEventListener("scroll",F,bl.passive)}function R(){m!==void 0&&(m.removeEventListener("scroll",F,bl.passive),m=void 0)}function $(){let w=b(e.type==="list"?"div":"tbody",u.value.map(a.default));return a.before!==void 0&&(w=a.before().concat(w)),il(a.after,w)}return nl(()=>{v()}),ol(()=>{k()}),Pl(()=>{k()}),Fl(()=>{R()}),Mt(()=>{R()}),()=>{if(a.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?Tl({ref:s,class:"q-table__middle "+h.value},$()):d(Sa[e.type],{...o,ref:s,class:[o.class,h.value],...q.value},$)}}}),Ca=De({name:"QField",inheritAttrs:!1,props:{...rl,tag:{type:String,default:"label"}},emits:ul,setup(){return sl(cl({tagProp:!0}))}}),pa=De({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(e,{slots:a}){const o=f(()=>parseInt(e.lines,10)),m=f(()=>"q-item__label"+(e.overline===!0?" q-item__label--overline text-overline":"")+(e.caption===!0?" q-item__label--caption text-caption":"")+(e.header===!0?" q-item__label--header":"")+(o.value===1?" ellipsis":"")),s=f(()=>e.lines!==void 0&&o.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":o.value}:null);return()=>d("div",{style:s.value,class:m.value},vt(a.default))}}),_l=e=>["add","add-unique","toggle"].includes(e),_a=".*+?^${}()|[]\\",ka=Object.keys(rl);function Gt(e,a){if(typeof e=="function")return e;const o=e!==void 0?e:a;return m=>m!==null&&typeof m=="object"&&o in m?m[o]:m}const tl=De({name:"QSelect",inheritAttrs:!1,props:{...el,...Rl,...rl,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:_l},mapOptions:Boolean,emitValue:Boolean,disableTabSelection:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:{},transitionHide:{},transitionDuration:{},behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:el.virtualScrollItemSize.type,onNewValue:Function,onFilter:Function},emits:[...ul,"add","remove","inputValue","keyup","keypress","keydown","popupShow","popupHide","filterAbort"],setup(e,{slots:a,emit:o}){const{proxy:m}=Me(),{$q:s}=m,r=I(!1),g=I(!1),v=I(-1),b=I(""),F=I(!1),u=I(!1);let h=null,q=null,P,B,k,R=null,$,w,E,T;const K=I(null),A=I(null),G=I(null),oe=I(null),Q=I(null),j=Al(e),ce=Ql(i),ie=f(()=>Array.isArray(e.options)?e.options.length:0),we=f(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:Ce,virtualScrollSliceSizeComputed:fe,localResetVirtualScroll:de,padVirtualScroll:N,onVirtualScrollEvt:te,scrollTo:Z,setVirtualScrollSize:_e}=Ml({virtualScrollLength:ie,getVirtualScrollTarget:$t,getVirtualScrollEl:xt,virtualScrollItemSizeComputed:we}),c=cl(),C=f(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,x=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const V=e.mapOptions===!0&&P!==void 0?P:[],U=x.map(J=>It(J,V));return e.modelValue===null&&t===!0?U.filter(J=>J!==null):U}return x}),H=f(()=>{const t={};return ka.forEach(x=>{const V=e[x];V!==void 0&&(t[x]=V)}),t}),W=f(()=>e.optionsDark===null?c.isDark.value:e.optionsDark),y=f(()=>Ot(C.value)),n=f(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||C.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),l=f(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),D=f(()=>ie.value===0),M=f(()=>C.value.map(t=>ye.value(t)).join(", ")),ee=f(()=>e.displayValue!==void 0?e.displayValue:M.value),be=f(()=>e.optionsHtml===!0?()=>!0:t=>t?.html===!0),He=f(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||C.value.some(be.value))),ge=f(()=>c.focused.value===!0?e.tabindex:-1),Ee=f(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":r.value===!0?"true":"false","aria-controls":`${c.targetUid.value}_lb`};return v.value>=0&&(t["aria-activedescendant"]=`${c.targetUid.value}_${v.value}`),t}),ke=f(()=>({id:`${c.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),xe=f(()=>C.value.map((t,x)=>({index:x,opt:t,html:be.value(t),selected:!0,removeAtIndex:Et,toggleOption:Pe,tabindex:ge.value}))),je=f(()=>{if(ie.value===0)return[];const{from:t,to:x}=Ce.value;return e.options.slice(t,x).map((V,U)=>{const J=Ue.value(V)===!0,Y=lt(V)===!0,ve=t+U,re={clickable:!0,active:Y,activeClass:Ye.value,manualFocus:!0,focused:!1,disable:J,tabindex:-1,dense:e.optionsDense,dark:W.value,role:"option","aria-selected":Y===!0?"true":"false",id:`${c.targetUid.value}_${ve}`,onClick:()=>{Pe(V)}};return J!==!0&&(v.value===ve&&(re.focused=!0),s.platform.is.desktop===!0&&(re.onMousemove=()=>{r.value===!0&&Ve(ve)})),{index:ve,opt:V,html:be.value(V),label:ye.value(V),selected:re.active,focused:re.focused,toggleOption:Pe,setOptionIndex:Ve,itemProps:re}})}),We=f(()=>e.dropdownIcon!==void 0?e.dropdownIcon:s.iconSet.arrow.dropdown),mt=f(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),Ye=f(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),Fe=f(()=>Gt(e.optionValue,"value")),ye=f(()=>Gt(e.optionLabel,"label")),Ue=f(()=>Gt(e.optionDisable,"disable")),Xe=f(()=>C.value.map(Fe.value)),Ct=f(()=>{const t={onInput:i,onChange:ce,onKeydown:Ge,onKeyup:at,onKeypress:bt,onFocus:gt,onClick(x){B===!0&&et(x)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=ce,t});he(C,t=>{P=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&c.innerLoading.value!==!0&&(g.value!==!0&&r.value!==!0||y.value!==!0)&&(k!==!0&&ut(),(g.value===!0||r.value===!0)&&z(""))},{immediate:!0}),he(()=>e.fillInput,ut),he(r,jt),he(ie,$l);function pt(t){return e.emitValue===!0?Fe.value(t):t}function tt(t){if(t!==-1&&t<C.value.length)if(e.multiple===!0){const x=e.modelValue.slice();o("remove",{index:t,value:x.splice(t,1)[0]}),o("update:modelValue",x)}else o("update:modelValue",null)}function Et(t){tt(t),c.focus()}function _t(t,x){const V=pt(t);if(e.multiple!==!0){e.fillInput===!0&&O(ye.value(t),!0,!0),o("update:modelValue",V);return}if(C.value.length===0){o("add",{index:0,value:V}),o("update:modelValue",e.multiple===!0?[V]:V);return}if(x===!0&&lt(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const U=e.modelValue.slice();o("add",{index:U.length,value:V}),U.push(V),o("update:modelValue",U)}function Pe(t,x){if(c.editable.value!==!0||t===void 0||Ue.value(t)===!0)return;const V=Fe.value(t);if(e.multiple!==!0){x!==!0&&(O(e.fillInput===!0?ye.value(t):"",!0,!0),Je()),A.value?.focus(),(C.value.length===0||yt(Fe.value(C.value[0]),V)!==!0)&&o("update:modelValue",e.emitValue===!0?V:t);return}if((B!==!0||F.value===!0)&&c.focus(),gt(),C.value.length===0){const Y=e.emitValue===!0?V:t;o("add",{index:0,value:Y}),o("update:modelValue",e.multiple===!0?[Y]:Y);return}const U=e.modelValue.slice(),J=Xe.value.findIndex(Y=>yt(Y,V));if(J!==-1)o("remove",{index:J,value:U.splice(J,1)[0]});else{if(e.maxValues!==void 0&&U.length>=e.maxValues)return;const Y=e.emitValue===!0?V:t;o("add",{index:U.length,value:Y}),U.push(Y)}o("update:modelValue",U)}function Ve(t){if(s.platform.is.desktop!==!0)return;const x=t!==-1&&t<ie.value?t:-1;v.value!==x&&(v.value=x)}function Re(t=1,x){if(r.value===!0){let V=v.value;do V=Cl(V+t,-1,ie.value-1);while(V!==-1&&V!==v.value&&Ue.value(e.options[V])===!0);v.value!==V&&(Ve(V),Z(V),x!==!0&&e.useInput===!0&&e.fillInput===!0&&p(V>=0?ye.value(e.options[V]):$,!0))}}function It(t,x){const V=U=>yt(Fe.value(U),t);return e.options.find(V)||x.find(V)||t}function lt(t){const x=Fe.value(t);return Xe.value.find(V=>yt(V,x))!==void 0}function gt(t){e.useInput===!0&&A.value!==null&&(t===void 0||A.value===t.target&&t.target.value===M.value)&&A.value.select()}function kt(t){Xl(t,27)===!0&&r.value===!0&&(et(t),Je(),ut()),o("keyup",t)}function at(t){const{value:x}=t.target;if(t.keyCode!==void 0){kt(t);return}if(t.target.value="",h!==null&&(clearTimeout(h),h=null),q!==null&&(clearTimeout(q),q=null),ut(),typeof x=="string"&&x.length!==0){const V=x.toLocaleLowerCase(),U=Y=>{const ve=e.options.find(re=>String(Y.value(re)).toLocaleLowerCase()===V);return ve===void 0?!1:(C.value.indexOf(ve)===-1?Pe(ve):Je(),!0)},J=Y=>{U(Fe)!==!0&&Y!==!0&&U(ye)!==!0&&z(x,!0,()=>J(!0))};J()}else c.clearValue(t)}function bt(t){o("keypress",t)}function Ge(t){if(o("keydown",t),Kl(t)===!0)return;const x=b.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),V=t.shiftKey!==!0&&e.disableTabSelection!==!0&&e.multiple!==!0&&(v.value!==-1||x===!0);if(t.keyCode===27){Tt(t);return}if(t.keyCode===9&&V===!1){ot();return}if(t.target===void 0||t.target.id!==c.targetUid.value||c.editable.value!==!0)return;if(t.keyCode===40&&c.innerLoading.value!==!0&&r.value===!1){Ke(t),it();return}if(t.keyCode===8&&(e.useChips===!0||e.clearable===!0)&&e.hideSelected!==!0&&b.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?tt(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&o("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof b.value!="string"||b.value.length===0)&&(Ke(t),v.value=-1,Re(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&fe.value!==void 0&&(Ke(t),v.value=Math.max(-1,Math.min(ie.value,v.value+(t.keyCode===33?-1:1)*fe.value.view)),Re(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(Ke(t),Re(t.keyCode===38?-1:1,e.multiple));const U=ie.value;if((E===void 0||T<Date.now())&&(E=""),U>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||E.length!==0)){r.value!==!0&&it(t);const J=t.key.toLocaleLowerCase(),Y=E.length===1&&E[0]===J;T=Date.now()+1500,Y===!1&&(Ke(t),E+=J);const ve=new RegExp("^"+E.split("").map(Ut=>_a.indexOf(Ut)!==-1?"\\"+Ut:Ut).join(".*"),"i");let re=v.value;if(Y===!0||re<0||ve.test(ye.value(e.options[re]))!==!0)do re=Cl(re+1,-1,U-1);while(re!==v.value&&(Ue.value(e.options[re])===!0||ve.test(ye.value(e.options[re]))!==!0));v.value!==re&&Oe(()=>{Ve(re),Z(re),re>=0&&e.useInput===!0&&e.fillInput===!0&&p(ye.value(e.options[re]),!0)});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||E!=="")&&(t.keyCode!==9||V===!1))){if(t.keyCode!==9&&Ke(t),v.value!==-1&&v.value<U){Pe(e.options[v.value]);return}if(x===!0){const J=(Y,ve)=>{if(ve){if(_l(ve)!==!0)return}else ve=e.newValueMode;if(O("",e.multiple!==!0,!0),Y==null)return;(ve==="toggle"?Pe:_t)(Y,ve==="add-unique"),e.multiple!==!0&&(A.value?.focus(),Je())};if(e.onNewValue!==void 0?o("newValue",b.value,J):J(b.value),e.multiple!==!0)return}r.value===!0?ot():c.innerLoading.value!==!0&&it()}}function xt(){return B===!0?Q.value:G.value!==null&&G.value.contentEl!==null?G.value.contentEl:void 0}function $t(){return xt()}function Lt(){return e.hideSelected===!0?[]:a["selected-item"]!==void 0?xe.value.map(t=>a["selected-item"](t)).slice():a.selected!==void 0?[].concat(a.selected()):e.useChips===!0?xe.value.map((t,x)=>d(dl,{key:"option-"+x,removable:c.editable.value===!0&&Ue.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:ge.value,onRemove(){t.removeAtIndex(x)}},()=>d("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:ye.value(t.opt)}))):[d("span",{class:"ellipsis",[He.value===!0?"innerHTML":"textContent"]:ee.value})]}function Vt(){if(D.value===!0)return a["no-option"]!==void 0?a["no-option"]({inputValue:b.value}):void 0;const t=a.option!==void 0?a.option:V=>d(wt,{key:V.index,...V.itemProps},()=>d(Le,()=>d(pa,()=>d("span",{[V.html===!0?"innerHTML":"textContent"]:V.label}))));let x=N("div",je.value.map(t));return a["before-options"]!==void 0&&(x=a["before-options"]().concat(x)),il(a["after-options"],x)}function Nt(t,x){const V=x===!0?{...Ee.value,...c.splitAttrs.attributes.value}:void 0,U={ref:x===!0?A:void 0,key:"i_t",class:n.value,style:e.inputStyle,value:b.value!==void 0?b.value:"",type:"search",...V,id:x===!0?c.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...Ct.value};return t!==!0&&B===!0&&(Array.isArray(U.class)===!0?U.class=[...U.class,"no-pointer-events"]:U.class+=" no-pointer-events"),d("input",U)}function i(t){h!==null&&(clearTimeout(h),h=null),q!==null&&(clearTimeout(q),q=null),!(t&&t.target&&t.target.qComposing===!0)&&(p(t.target.value||""),k=!0,$=b.value,c.focused.value!==!0&&(B!==!0||F.value===!0)&&c.focus(),e.onFilter!==void 0&&(h=setTimeout(()=>{h=null,z(b.value)},e.inputDebounce)))}function p(t,x){b.value!==t&&(b.value=t,x===!0||e.inputDebounce===0||e.inputDebounce==="0"?o("inputValue",t):q=setTimeout(()=>{q=null,o("inputValue",t)},e.inputDebounce))}function O(t,x,V){k=V!==!0,e.useInput===!0&&(p(t,!0),(x===!0||V!==!0)&&($=t),x!==!0&&z(t))}function z(t,x,V){if(e.onFilter===void 0||x!==!0&&c.focused.value!==!0)return;c.innerLoading.value===!0?o("filterAbort"):(c.innerLoading.value=!0,u.value=!0),t!==""&&e.multiple!==!0&&C.value.length!==0&&k!==!0&&t===ye.value(C.value[0])&&(t="");const U=setTimeout(()=>{r.value===!0&&(r.value=!1)},10);R!==null&&clearTimeout(R),R=U,o("filter",t,(J,Y)=>{(x===!0||c.focused.value===!0)&&R===U&&(clearTimeout(R),typeof J=="function"&&J(),u.value=!1,Oe(()=>{c.innerLoading.value=!1,c.editable.value===!0&&(x===!0?r.value===!0&&Je():r.value===!0?jt(!0):r.value=!0),typeof Y=="function"&&Oe(()=>{Y(m)}),typeof V=="function"&&Oe(()=>{V(m)})}))},()=>{c.focused.value===!0&&R===U&&(clearTimeout(R),c.innerLoading.value=!1,u.value=!1),r.value===!0&&(r.value=!1)})}function L(){return d(ua,{ref:G,class:l.value,style:e.popupContentStyle,modelValue:r.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&D.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:W.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:e.popupNoRouteDismiss,square:mt.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...ke.value,onScrollPassive:te,onBeforeShow:vl,onBeforeHide:ne,onShow:le},Vt)}function ne(t){ml(t),ot()}function le(){_e()}function qe(t){et(t),A.value?.focus(),F.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function ae(t){et(t),Oe(()=>{F.value=!1})}function Ie(){const t=[d(Ca,{class:`col-auto ${c.fieldClass.value}`,...H.value,for:c.targetUid.value,dark:W.value,square:!0,loading:u.value,itemAligned:!1,filled:!0,stackLabel:b.value.length!==0,...c.splitAttrs.listeners.value,onFocus:qe,onBlur:ae},{...a,rawControl:()=>c.getControl(!0),before:void 0,after:void 0})];return r.value===!0&&t.push(d("div",{ref:Q,class:l.value+" scroll",style:e.popupContentStyle,...ke.value,onClick:Tt,onScrollPassive:te},Vt())),d(zt,{ref:oe,modelValue:g.value,position:e.useInput===!0?"top":void 0,transitionShow:w,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,noRouteDismiss:e.popupNoRouteDismiss,onBeforeShow:vl,onBeforeHide:nt,onHide:Ht,onShow:Il},()=>d("div",{class:"q-select__dialog"+(W.value===!0?" q-select__dialog--dark q-dark":"")+(F.value===!0?" q-select__dialog--focused":"")},t))}function nt(t){ml(t),oe.value!==null&&oe.value.__updateRefocusTarget(c.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),c.focused.value=!1}function Ht(t){Je(),c.focused.value===!1&&o("blur",t),ut()}function Il(){const t=document.activeElement;(t===null||t.id!==c.targetUid.value)&&A.value!==null&&A.value!==t&&A.value.focus(),_e()}function ot(){g.value!==!0&&(v.value=-1,r.value===!0&&(r.value=!1),c.focused.value===!1&&(R!==null&&(clearTimeout(R),R=null),c.innerLoading.value===!0&&(o("filterAbort"),c.innerLoading.value=!1,u.value=!1)))}function it(t){c.editable.value===!0&&(B===!0?(c.onControlFocusin(t),g.value=!0,Oe(()=>{c.focus()})):c.focus(),e.onFilter!==void 0?z(b.value):(D.value!==!0||a["no-option"]!==void 0)&&(r.value=!0))}function Je(){g.value=!1,ot()}function ut(){e.useInput===!0&&O(e.multiple!==!0&&e.fillInput===!0&&C.value.length!==0&&ye.value(C.value[0])||"",!0,!0)}function jt(t){let x=-1;if(t===!0){if(C.value.length!==0){const V=Fe.value(C.value[0]);x=e.options.findIndex(U=>yt(Fe.value(U),V))}de(x)}Ve(x)}function $l(t,x){r.value===!0&&c.innerLoading.value===!1&&(de(-1,!0),Oe(()=>{r.value===!0&&c.innerLoading.value===!1&&(t>x?de():jt(!0))}))}function fl(){g.value===!1&&G.value!==null&&G.value.updatePosition()}function vl(t){t!==void 0&&et(t),o("popupShow",t),c.hasPopupOpen=!0,c.onControlFocusin(t)}function ml(t){t!==void 0&&et(t),o("popupHide",t),c.hasPopupOpen=!1,c.onControlFocusout(t)}function gl(){B=s.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?a["no-option"]!==void 0||e.onFilter!==void 0||D.value===!1:!0),w=s.platform.is.ios===!0&&B===!0&&e.useInput===!0?"fade":e.transitionShow}return Wl(gl),Yl(fl),gl(),Mt(()=>{h!==null&&clearTimeout(h),q!==null&&clearTimeout(q)}),Object.assign(m,{showPopup:it,hidePopup:Je,removeAtIndex:tt,add:_t,toggleOption:Pe,getOptionIndex:()=>v.value,setOptionIndex:Ve,moveOptionSelection:Re,filter:z,updateMenuPosition:fl,updateInputValue:O,isOptionSelected:lt,getEmittingOptionValue:pt,isOptionDisabled:(...t)=>Ue.value.apply(null,t)===!0,getOptionValue:(...t)=>Fe.value.apply(null,t),getOptionLabel:(...t)=>ye.value.apply(null,t)}),Object.assign(c,{innerValue:C,fieldClass:f(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:K,targetRef:A,hasValue:y,showPopup:it,floatingLabel:f(()=>e.hideSelected!==!0&&y.value===!0||typeof b.value=="number"||b.value.length!==0||Ot(e.displayValue)),getControlChild:()=>{if(c.editable.value!==!1&&(g.value===!0||D.value!==!0||a["no-option"]!==void 0))return B===!0?Ie():L();c.hasPopupOpen===!0&&(c.hasPopupOpen=!1)},controlEvents:{onFocusin(t){c.onControlFocusin(t)},onFocusout(t){c.onControlFocusout(t,()=>{ut(),ot()})},onClick(t){if(Tt(t),B!==!0&&r.value===!0){ot(),A.value?.focus();return}it(t)}},getControl:t=>{const x=Lt(),V=t===!0||g.value!==!0||B!==!0;if(e.useInput===!0)x.push(Nt(t,V));else if(c.editable.value===!0){const J=V===!0?Ee.value:void 0;x.push(d("input",{ref:V===!0?A:void 0,key:"d_t",class:"q-select__focus-target",id:V===!0?c.targetUid.value:void 0,value:ee.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...J,onKeydown:Ge,onKeyup:kt,onKeypress:bt})),V===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&x.push(d("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:at}))}if(j.value!==void 0&&e.disable!==!0&&Xe.value.length!==0){const J=Xe.value.map(Y=>d("option",{value:Y,selected:!0}));x.push(d("select",{class:"hidden",name:j.value,multiple:e.multiple},J))}const U=e.useInput===!0||V!==!0?void 0:c.splitAttrs.attributes.value;return d("div",{class:"q-field__native row items-center",...U,...c.splitAttrs.listeners.value},x)},getInnerAppend:()=>e.loading!==!0&&u.value!==!0&&e.hideDropdownIcon!==!0?[d(Ne,{class:"q-select__dropdown-icon"+(r.value===!0?" rotate-180":""),name:We.value})]:null}),sl(c)}}),xa={xs:2,sm:4,md:6,lg:10,xl:14};function kl(e,a,o){return{transform:a===!0?`translateX(${o.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}const Va=De({name:"QLinearProgress",props:{...ll,...Gl,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(e,{slots:a}){const{proxy:o}=Me(),m=al(e,o.$q),s=Jl(e,xa),r=f(()=>e.indeterminate===!0||e.query===!0),g=f(()=>e.reverse!==e.query),v=f(()=>({...s.value!==null?s.value:{},"--q-linear-progress-speed":`${e.animationSpeed}ms`})),b=f(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),F=f(()=>kl(e.buffer!==void 0?e.buffer:1,g.value,o.$q)),u=f(()=>`with${e.instantFeedback===!0?"out":""}-transition`),h=f(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${u.value} q-linear-progress__track--${m.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),q=f(()=>kl(r.value===!0?1:e.value,g.value,o.$q)),P=f(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${u.value} q-linear-progress__model--${r.value===!0?"in":""}determinate`),B=f(()=>({width:`${e.value*100}%`})),k=f(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"} q-linear-progress__stripe--${u.value}`);return()=>{const R=[d("div",{class:h.value,style:F.value}),d("div",{class:P.value,style:q.value})];return e.stripe===!0&&r.value===!1&&R.push(d("div",{class:k.value,style:B.value})),d("div",{class:b.value,style:v.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},il(a.default,R))}}});let ht=0;const qa={fullscreen:Boolean,noRouteFullscreenExit:Boolean},Fa=["update:fullscreen","fullscreen"];function Pa(){const e=Me(),{props:a,emit:o,proxy:m}=e;let s,r,g;const v=I(!1);Zl(e)===!0&&he(()=>m.$route.fullPath,()=>{a.noRouteFullscreenExit!==!0&&u()}),he(()=>a.fullscreen,h=>{v.value!==h&&b()}),he(v,h=>{o("update:fullscreen",h),o("fullscreen",h)});function b(){v.value===!0?u():F()}function F(){v.value!==!0&&(v.value=!0,g=m.$el.parentNode,g.replaceChild(r,m.$el),document.body.appendChild(m.$el),ht++,ht===1&&document.body.classList.add("q-body--fullscreen-mixin"),s={handler:u},yl.add(s))}function u(){v.value===!0&&(s!==void 0&&(yl.remove(s),s=void 0),g.replaceChild(m.$el,r),v.value=!1,ht=Math.max(0,ht-1),ht===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),m.$el.scrollIntoView!==void 0&&setTimeout(()=>{m.$el.scrollIntoView()})))}return nl(()=>{r=document.createElement("span")}),ol(()=>{a.fullscreen===!0&&F()}),Mt(u),Object.assign(m,{toggleFullscreen:b,setFullscreen:F,exitFullscreen:u}),{inFullscreen:v,toggleFullscreen:b}}function Ra(e,a){return new Date(e)-new Date(a)}const Aa={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function Ba(e,a,o,m){const s=f(()=>{const{sortBy:v}=a.value;return v&&o.value.find(b=>b.name===v)||null}),r=f(()=>e.sortMethod!==void 0?e.sortMethod:(v,b,F)=>{const u=o.value.find(P=>P.name===b);if(u===void 0||u.field===void 0)return v;const h=F===!0?-1:1,q=typeof u.field=="function"?P=>u.field(P):P=>P[u.field];return v.sort((P,B)=>{let k=q(P),R=q(B);return u.rawSort!==void 0?u.rawSort(k,R,P,B)*h:k==null?-1*h:R==null?1*h:u.sort!==void 0?u.sort(k,R,P,B)*h:Jt(k)===!0&&Jt(R)===!0?(k-R)*h:Sl(k)===!0&&Sl(R)===!0?Ra(k,R)*h:typeof k=="boolean"&&typeof R=="boolean"?(k-R)*h:([k,R]=[k,R].map($=>($+"").toLocaleString().toLowerCase()),k<R?-1*h:k===R?0:h)})});function g(v){let b=e.columnSortOrder;if(ea(v)===!0)v.sortOrder&&(b=v.sortOrder),v=v.name;else{const h=o.value.find(q=>q.name===v);h?.sortOrder&&(b=h.sortOrder)}let{sortBy:F,descending:u}=a.value;F!==v?(F=v,u=b==="da"):e.binaryStateSort===!0?u=!u:u===!0?b==="ad"?F=null:u=!1:b==="ad"?u=!0:F=null,m({sortBy:F,descending:u,page:1})}return{columnToSort:s,computedSortMethod:r,sort:g}}const Ta={filter:[String,Object],filterMethod:Function};function za(e,a){const o=f(()=>e.filterMethod!==void 0?e.filterMethod:(m,s,r,g)=>{const v=s?s.toLowerCase():"";return m.filter(b=>r.some(F=>{const u=g(F,b)+"";return(u==="undefined"||u==="null"?"":u.toLowerCase()).indexOf(v)!==-1}))});return he(()=>e.filter,()=>{Oe(()=>{a({page:1},!0)})},{deep:!0}),{computedFilterMethod:o}}function Oa(e,a){for(const o in a)if(a[o]!==e[o])return!1;return!0}function xl(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const Da={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function Ma(e,a){const{props:o,emit:m}=e,s=I(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:o.rowsPerPageOptions.length!==0?o.rowsPerPageOptions[0]:5},o.pagination)),r=f(()=>{const u=o["onUpdate:pagination"]!==void 0?{...s.value,...o.pagination}:s.value;return xl(u)}),g=f(()=>r.value.rowsNumber!==void 0);function v(u){b({pagination:u,filter:o.filter})}function b(u={}){Oe(()=>{m("request",{pagination:u.pagination||r.value,filter:u.filter||o.filter,getCellValue:a})})}function F(u,h){const q=xl({...r.value,...u});if(Oa(r.value,q)===!0){g.value===!0&&h===!0&&v(q);return}if(g.value===!0){v(q);return}o.pagination!==void 0&&o["onUpdate:pagination"]!==void 0?m("update:pagination",q):s.value=q}return{innerPagination:s,computedPagination:r,isServerSide:g,requestServerInteraction:b,setPagination:F}}function Ea(e,a,o,m,s,r){const{props:g,emit:v,proxy:{$q:b}}=e,F=f(()=>m.value===!0?o.value.rowsNumber||0:r.value),u=f(()=>{const{page:T,rowsPerPage:K}=o.value;return(T-1)*K}),h=f(()=>{const{page:T,rowsPerPage:K}=o.value;return T*K}),q=f(()=>o.value.page===1),P=f(()=>o.value.rowsPerPage===0?1:Math.max(1,Math.ceil(F.value/o.value.rowsPerPage))),B=f(()=>h.value===0?!0:o.value.page>=P.value),k=f(()=>(g.rowsPerPageOptions.includes(a.value.rowsPerPage)?g.rowsPerPageOptions:[a.value.rowsPerPage].concat(g.rowsPerPageOptions)).map(K=>({label:K===0?b.lang.table.allRows:""+K,value:K})));he(P,(T,K)=>{if(T===K)return;const A=o.value.page;T&&!A?s({page:1}):T<A&&s({page:T})});function R(){s({page:1})}function $(){const{page:T}=o.value;T>1&&s({page:T-1})}function w(){const{page:T,rowsPerPage:K}=o.value;h.value>0&&T*K<F.value&&s({page:T+1})}function E(){s({page:P.value})}return g["onUpdate:pagination"]!==void 0&&v("update:pagination",{...o.value}),{firstRowIndex:u,lastRowIndex:h,isFirstPage:q,isLastPage:B,pagesNumber:P,computedRowsPerPageOptions:k,computedRowsNumber:F,firstPage:R,prevPage:$,nextPage:w,lastPage:E}}const Ia={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},$a=["update:selected","selection"];function La(e,a,o,m){const s=f(()=>{const B={};return e.selected.map(m.value).forEach(k=>{B[k]=!0}),B}),r=f(()=>e.selection!=="none"),g=f(()=>e.selection==="single"),v=f(()=>e.selection==="multiple"),b=f(()=>o.value.length!==0&&o.value.every(B=>s.value[m.value(B)]===!0)),F=f(()=>b.value!==!0&&o.value.some(B=>s.value[m.value(B)]===!0)),u=f(()=>e.selected.length);function h(B){return s.value[B]===!0}function q(){a("update:selected",[])}function P(B,k,R,$){a("selection",{rows:k,added:R,keys:B,evt:$});const w=g.value===!0?R===!0?k:[]:R===!0?e.selected.concat(k):e.selected.filter(E=>B.includes(m.value(E))===!1);a("update:selected",w)}return{hasSelectionMode:r,singleSelection:g,multipleSelection:v,allRowsSelected:b,someRowsSelected:F,rowsSelectedNumber:u,isRowSelected:h,clearSelection:q,updateSelection:P}}function Vl(e){return Array.isArray(e)?e.slice():[]}const Na={expanded:Array},Ha=["update:expanded"];function ja(e,a){const o=I(Vl(e.expanded));he(()=>e.expanded,g=>{o.value=Vl(g)});function m(g){return o.value.includes(g)}function s(g){e.expanded!==void 0?a("update:expanded",g):o.value=g}function r(g,v){const b=o.value.slice(),F=b.indexOf(g);v===!0?F===-1&&(b.push(g),s(b)):F!==-1&&(b.splice(F,1),s(b))}return{isRowExpanded:m,setExpanded:s,updateExpanded:r}}const Ua={visibleColumns:Array};function Qa(e,a,o){const m=f(()=>{if(e.columns!==void 0)return e.columns;const v=e.rows[0];return v!==void 0?Object.keys(v).map(b=>({name:b,label:b.toUpperCase(),field:b,align:Jt(v[b])?"right":"left",sortable:!0})):[]}),s=f(()=>{const{sortBy:v,descending:b}=a.value;return(e.visibleColumns!==void 0?m.value.filter(u=>u.required===!0||e.visibleColumns.includes(u.name)===!0):m.value).map(u=>{const h=u.align||"right",q=`text-${h}`;return{...u,align:h,__iconClass:`q-table__sort-icon q-table__sort-icon--${h}`,__thClass:q+(u.headerClasses!==void 0?" "+u.headerClasses:"")+(u.sortable===!0?" sortable":"")+(u.name===v?` sorted ${b===!0?"sort-desc":""}`:""),__tdStyle:u.style!==void 0?typeof u.style!="function"?()=>u.style:u.style:()=>null,__tdClass:u.classes!==void 0?typeof u.classes!="function"?()=>q+" "+u.classes:P=>q+" "+u.classes(P):()=>q}})}),r=f(()=>{const v={};return s.value.forEach(b=>{v[b.name]=b}),v}),g=f(()=>e.tableColspan!==void 0?e.tableColspan:s.value.length+(o.value===!0?1:0));return{colList:m,computedCols:s,computedColsMap:r,computedColspan:g}}const Rt="q-table__bottom row items-center",El={};Dl.forEach(e=>{El[e]={}});const At=De({name:"QTable",props:{rows:{type:Array,required:!0},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{},...El,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],tableRowStyleFn:Function,tableRowClassFn:Function,cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],cardStyleFn:Function,cardClassFn:Function,hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...ll,...qa,...Ua,...Ta,...Da,...Na,...Ia,...Aa},emits:["request","virtualScroll",...Fa,...Ha,...$a],setup(e,{slots:a,emit:o}){const m=Me(),{proxy:{$q:s}}=m,r=al(e,s),{inFullscreen:g,toggleFullscreen:v}=Pa(),b=f(()=>typeof e.rowKey=="function"?e.rowKey:i=>i[e.rowKey]),F=I(null),u=I(null),h=f(()=>e.grid!==!0&&e.virtualScroll===!0),q=f(()=>" q-table__card"+(r.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),P=f(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":q.value)+(r.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(g.value===!0?" fullscreen scroll":"")),B=f(()=>P.value+(e.loading===!0?" q-table--loading":""));he(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+P.value,()=>{h.value===!0&&u.value?.reset()});const{innerPagination:k,computedPagination:R,isServerSide:$,requestServerInteraction:w,setPagination:E}=Ma(m,Ve),{computedFilterMethod:T}=za(e,E),{isRowExpanded:K,setExpanded:A,updateExpanded:G}=ja(e,o),oe=f(()=>{let i=e.rows;if($.value===!0||i.length===0)return i;const{sortBy:p,descending:O}=R.value;return e.filter&&(i=T.value(i,e.filter,c.value,Ve)),W.value!==null&&(i=y.value(e.rows===i?i.slice():i,p,O)),i}),Q=f(()=>oe.value.length),j=f(()=>{let i=oe.value;if($.value===!0)return i;const{rowsPerPage:p}=R.value;return p!==0&&(l.value===0&&e.rows!==i?i.length>D.value&&(i=i.slice(0,D.value)):i=i.slice(l.value,D.value)),i}),{hasSelectionMode:ce,singleSelection:ie,multipleSelection:we,allRowsSelected:Ce,someRowsSelected:fe,rowsSelectedNumber:de,isRowSelected:N,clearSelection:te,updateSelection:Z}=La(e,o,j,b),{colList:_e,computedCols:c,computedColsMap:C,computedColspan:H}=Qa(e,R,ce),{columnToSort:W,computedSortMethod:y,sort:n}=Ba(e,R,_e,E),{firstRowIndex:l,lastRowIndex:D,isFirstPage:M,isLastPage:ee,pagesNumber:be,computedRowsPerPageOptions:He,computedRowsNumber:ge,firstPage:Ee,prevPage:ke,nextPage:xe,lastPage:je}=Ea(m,k,R,$,E,Q),We=f(()=>j.value.length===0),mt=f(()=>{const i={};return Dl.forEach(p=>{i[p]=e[p]}),i.virtualScrollItemSize===void 0&&(i.virtualScrollItemSize=e.dense===!0?28:48),i});function Ye(){h.value===!0&&u.value.reset()}function Fe(){if(e.grid===!0)return Nt();const i=e.hideHeader!==!0?gt:null;if(h.value===!0){const O=a["top-row"],z=a["bottom-row"],L={default:ne=>Ct(ne.item,a.body,ne.index)};if(O!==void 0){const ne=d("tbody",O({cols:c.value}));L.before=i===null?()=>ne:()=>[i()].concat(ne)}else i!==null&&(L.before=i);return z!==void 0&&(L.after=()=>d("tbody",z({cols:c.value}))),d(wa,{ref:u,class:e.tableClass,style:e.tableStyle,...mt.value,scrollTarget:e.virtualScrollTarget,items:j.value,type:"__qtable",tableColspan:H.value,onVirtualScroll:Ue},L)}const p=[pt()];return i!==null&&p.unshift(i()),Tl({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},p)}function ye(i,p){if(u.value!==null){u.value.scrollTo(i,p);return}i=parseInt(i,10);const O=F.value.querySelector(`tbody tr:nth-of-type(${i+1})`);if(O!==null){const z=F.value.querySelector(".q-table__middle.scroll"),L=O.offsetTop-e.virtualScrollStickySizeStart,ne=L<z.scrollTop?"decrease":"increase";z.scrollTop=L,o("virtualScroll",{index:i,from:0,to:k.value.rowsPerPage-1,direction:ne})}}function Ue(i){o("virtualScroll",i)}function Xe(){return[d(Va,{class:"q-table__linear-progress",color:e.color,dark:r.value,indeterminate:!0,trackColor:"transparent"})]}function Ct(i,p,O){const z=b.value(i),L=N(z);if(p!==void 0){const ae={key:z,row:i,pageIndex:O,__trClass:L?"selected":""};if(e.tableRowStyleFn!==void 0&&(ae.__trStyle=e.tableRowStyleFn(i)),e.tableRowClassFn!==void 0){const Ie=e.tableRowClassFn(i);Ie&&(ae.__trClass=`${Ie} ${ae.__trClass}`)}return p(tt(ae))}const ne=a["body-cell"],le=c.value.map(ae=>{const Ie=a[`body-cell-${ae.name}`],nt=Ie!==void 0?Ie:ne;return nt!==void 0?nt(Et({key:z,row:i,pageIndex:O,col:ae})):d("td",{class:ae.__tdClass(i),style:ae.__tdStyle(i)},Ve(ae,i))});if(ce.value===!0){const ae=a["body-selection"],Ie=ae!==void 0?ae(_t({key:z,row:i,pageIndex:O})):[d(Qt,{modelValue:L,color:e.color,dark:r.value,dense:e.dense,"onUpdate:modelValue":(nt,Ht)=>{Z([z],[i],nt,Ht)}})];le.unshift(d("td",{class:"q-table--col-auto-width"},Ie))}const qe={key:z,class:{selected:L}};if(e.onRowClick!==void 0&&(qe.class["cursor-pointer"]=!0,qe.onClick=ae=>{o("rowClick",ae,i,O)}),e.onRowDblclick!==void 0&&(qe.class["cursor-pointer"]=!0,qe.onDblclick=ae=>{o("rowDblclick",ae,i,O)}),e.onRowContextmenu!==void 0&&(qe.class["cursor-pointer"]=!0,qe.onContextmenu=ae=>{o("rowContextmenu",ae,i,O)}),e.tableRowStyleFn!==void 0&&(qe.style=e.tableRowStyleFn(i)),e.tableRowClassFn!==void 0){const ae=e.tableRowClassFn(i);ae&&(qe.class[ae]=!0)}return d("tr",qe,le)}function pt(){const i=a.body,p=a["top-row"],O=a["bottom-row"];let z=j.value.map((L,ne)=>Ct(L,i,ne));return p!==void 0&&(z=p({cols:c.value}).concat(z)),O!==void 0&&(z=z.concat(O({cols:c.value}))),d("tbody",z)}function tt(i){return Pe(i),i.cols=i.cols.map(p=>dt({...p},"value",()=>Ve(p,i.row))),i}function Et(i){return Pe(i),dt(i,"value",()=>Ve(i.col,i.row)),i}function _t(i){return Pe(i),i}function Pe(i){Object.assign(i,{cols:c.value,colsMap:C.value,sort:n,rowIndex:l.value+i.pageIndex,color:e.color,dark:r.value,dense:e.dense}),ce.value===!0&&dt(i,"selected",()=>N(i.key),(p,O)=>{Z([i.key],[i.row],p,O)}),dt(i,"expand",()=>K(i.key),p=>{G(i.key,p)})}function Ve(i,p){const O=typeof i.field=="function"?i.field(p):p[i.field];return i.format!==void 0?i.format(O,p):O}const Re=f(()=>({pagination:R.value,pagesNumber:be.value,isFirstPage:M.value,isLastPage:ee.value,firstPage:Ee,prevPage:ke,nextPage:xe,lastPage:je,inFullscreen:g.value,toggleFullscreen:v}));function It(){const i=a.top,p=a["top-left"],O=a["top-right"],z=a["top-selection"],L=ce.value===!0&&z!==void 0&&de.value>0,ne="q-table__top relative-position row items-center";if(i!==void 0)return d("div",{class:ne},[i(Re.value)]);let le;if(L===!0?le=z(Re.value).slice():(le=[],p!==void 0?le.push(d("div",{class:"q-table__control"},[p(Re.value)])):e.title&&le.push(d("div",{class:"q-table__control"},[d("div",{class:["q-table__title",e.titleClass]},e.title)]))),O!==void 0&&(le.push(d("div",{class:"q-table__separator col"})),le.push(d("div",{class:"q-table__control"},[O(Re.value)]))),le.length!==0)return d("div",{class:ne},le)}const lt=f(()=>fe.value===!0?null:Ce.value);function gt(){const i=kt();return e.loading===!0&&a.loading===void 0&&i.push(d("tr",{class:"q-table__progress"},[d("th",{class:"relative-position",colspan:H.value},Xe())])),d("thead",i)}function kt(){const i=a.header,p=a["header-cell"];if(i!==void 0)return i(at({header:!0})).slice();const O=c.value.map(z=>{const L=a[`header-cell-${z.name}`],ne=L!==void 0?L:p,le=at({col:z});return ne!==void 0?ne(le):d(va,{key:z.name,props:le},()=>z.label)});if(ie.value===!0&&e.grid!==!0)O.unshift(d("th",{class:"q-table--col-auto-width"}," "));else if(we.value===!0){const z=a["header-selection"],L=z!==void 0?z(at({})):[d(Qt,{color:e.color,modelValue:lt.value,dark:r.value,dense:e.dense,"onUpdate:modelValue":bt})];O.unshift(d("th",{class:"q-table--col-auto-width"},L))}return[d("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},O)]}function at(i){return Object.assign(i,{cols:c.value,sort:n,colsMap:C.value,color:e.color,dark:r.value,dense:e.dense}),we.value===!0&&dt(i,"selected",()=>lt.value,bt),i}function bt(i){fe.value===!0&&(i=!1),Z(j.value.map(b.value),j.value,i)}const Ge=f(()=>{const i=[e.iconFirstPage||s.iconSet.table.firstPage,e.iconPrevPage||s.iconSet.table.prevPage,e.iconNextPage||s.iconSet.table.nextPage,e.iconLastPage||s.iconSet.table.lastPage];return s.lang.rtl===!0?i.reverse():i});function xt(){if(e.hideBottom===!0)return;if(We.value===!0){if(e.hideNoData===!0)return;const O=e.loading===!0?e.loadingLabel||s.lang.table.loading:e.filter?e.noResultsLabel||s.lang.table.noResults:e.noDataLabel||s.lang.table.noData,z=a["no-data"],L=z!==void 0?[z({message:O,icon:s.iconSet.table.warning,filter:e.filter})]:[d(Ne,{class:"q-table__bottom-nodata-icon",name:s.iconSet.table.warning}),O];return d("div",{class:Rt+" q-table__bottom--nodata"},L)}const i=a.bottom;if(i!==void 0)return d("div",{class:Rt},[i(Re.value)]);const p=e.hideSelectedBanner!==!0&&ce.value===!0&&de.value>0?[d("div",{class:"q-table__control"},[d("div",[(e.selectedRowsLabel||s.lang.table.selectedRecords)(de.value)])])]:[];if(e.hidePagination!==!0)return d("div",{class:Rt+" justify-end"},Lt(p));if(p.length!==0)return d("div",{class:Rt},p)}function $t(i){E({page:1,rowsPerPage:i.value})}function Lt(i){let p;const{rowsPerPage:O}=R.value,z=e.paginationLabel||s.lang.table.pagination,L=a.pagination,ne=e.rowsPerPageOptions.length>1;if(i.push(d("div",{class:"q-table__separator col"})),ne===!0&&i.push(d("div",{class:"q-table__control"},[d("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||s.lang.table.recordsPerPage]),d(tl,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:O,options:He.value,displayValue:O===0?s.lang.table.allRows:O,dark:r.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":$t})])),L!==void 0)p=L(Re.value);else if(p=[d("span",O!==0?{class:"q-table__bottom-item"}:{},[O?z(l.value+1,Math.min(D.value,ge.value),ge.value):z(1,Q.value,ge.value)])],O!==0&&be.value>1){const le={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(le.size="sm"),be.value>2&&p.push(d(X,{key:"pgFirst",...le,icon:Ge.value[0],disable:M.value,"aria-label":s.lang.pagination.first,onClick:Ee})),p.push(d(X,{key:"pgPrev",...le,icon:Ge.value[1],disable:M.value,"aria-label":s.lang.pagination.prev,onClick:ke}),d(X,{key:"pgNext",...le,icon:Ge.value[2],disable:ee.value,"aria-label":s.lang.pagination.next,onClick:xe})),be.value>2&&p.push(d(X,{key:"pgLast",...le,icon:Ge.value[3],disable:ee.value,"aria-label":s.lang.pagination.last,onClick:je}))}return i.push(d("div",{class:"q-table__control"},p)),i}function Vt(){const i=e.gridHeader===!0?[d("table",{class:"q-table"},[gt()])]:e.loading===!0&&a.loading===void 0?Xe():void 0;return d("div",{class:"q-table__middle"},i)}function Nt(){const i=a.item!==void 0?a.item:p=>{const O=p.cols.map(L=>d("div",{class:"q-table__grid-item-row"},[d("div",{class:"q-table__grid-item-title"},[L.label]),d("div",{class:"q-table__grid-item-value"},[L.value])]));if(ce.value===!0){const L=a["body-selection"],ne=L!==void 0?L(p):[d(Qt,{modelValue:p.selected,color:e.color,dark:r.value,dense:e.dense,"onUpdate:modelValue":(le,qe)=>{Z([p.key],[p.row],le,qe)}})];O.unshift(d("div",{class:"q-table__grid-item-row"},ne),d(Zt,{dark:r.value}))}const z={class:["q-table__grid-item-card"+q.value,e.cardClass],style:e.cardStyle};if(e.cardStyleFn!==void 0&&(z.style=[z.style,e.cardStyleFn(p.row)]),e.cardClassFn!==void 0){const L=e.cardClassFn(p.row);L&&(z.class[0]+=` ${L}`)}return(e.onRowClick!==void 0||e.onRowDblclick!==void 0||e.onRowContextmenu!==void 0)&&(z.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(z.onClick=L=>{o("RowClick",L,p.row,p.pageIndex)}),e.onRowDblclick!==void 0&&(z.onDblclick=L=>{o("RowDblclick",L,p.row,p.pageIndex)}),e.onRowContextmenu!==void 0&&(z.onContextmenu=L=>{o("rowContextmenu",L,p.row,p.pageIndex)})),d("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(p.selected===!0?" q-table__grid-item--selected":"")},[d("div",z,O)])};return d("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},j.value.map((p,O)=>i(tt({key:b.value(p),row:p,pageIndex:O}))))}return Object.assign(m.proxy,{requestServerInteraction:w,setPagination:E,firstPage:Ee,prevPage:ke,nextPage:xe,lastPage:je,isRowSelected:N,clearSelection:te,isRowExpanded:K,setExpanded:A,sort:n,resetVirtualScroll:Ye,scrollTo:ye,getCellValue:Ve}),ta(m.proxy,{filteredSortedRows:()=>oe.value,computedRows:()=>j.value,computedRowsNumber:()=>ge.value}),()=>{const i=[It()],p={ref:F,class:B.value};return e.grid===!0?i.push(Vt()):Object.assign(p,{class:[p.class,e.cardClass],style:e.cardStyle}),i.push(Fe(),xt()),e.loading===!0&&a.loading!==void 0&&i.push(a.loading()),d("div",p,i)}}});function ct(e,a,o,m){const s=[];return e.forEach(r=>{m(r)===!0?s.push(r):a.push({failedPropValidation:o,file:r})}),s}function Bt(e){e?.dataTransfer&&(e.dataTransfer.dropEffect="copy"),Ke(e)}const Ka={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},Wa=["rejected"];function Ya({editable:e,dnd:a,getFileInput:o,addFilesToQueue:m}){const{props:s,emit:r,proxy:g}=Me(),v=I(null),b=f(()=>s.accept!==void 0?s.accept.split(",").map(w=>(w=w.trim(),w==="*"?"*/":(w.endsWith("/*")&&(w=w.slice(0,w.length-1)),w.toUpperCase()))):null),F=f(()=>parseInt(s.maxFiles,10)),u=f(()=>parseInt(s.maxTotalSize,10));function h(w){if(e.value)if(w!==Object(w)&&(w={target:null}),w.target?.matches('input[type="file"]')===!0)w.clientX===0&&w.clientY===0&&et(w);else{const E=o();E!==w.target&&E?.click(w)}}function q(w){e.value&&w&&m(null,w)}function P(w,E,T,K){let A=Array.from(E||w.target.files);const G=[],oe=()=>{G.length!==0&&r("rejected",G)};if(s.accept!==void 0&&b.value.indexOf("*/")===-1&&(A=ct(A,G,"accept",Q=>b.value.some(j=>Q.type.toUpperCase().startsWith(j)||Q.name.toUpperCase().endsWith(j))),A.length===0))return oe();if(s.maxFileSize!==void 0){const Q=parseInt(s.maxFileSize,10);if(A=ct(A,G,"max-file-size",j=>j.size<=Q),A.length===0)return oe()}if(s.multiple!==!0&&A.length!==0&&(A=[A[0]]),A.forEach(Q=>{Q.__key=Q.webkitRelativePath+Q.lastModified+Q.name+Q.size}),K===!0){const Q=T.map(j=>j.__key);A=ct(A,G,"duplicate",j=>Q.includes(j.__key)===!1)}if(A.length===0)return oe();if(s.maxTotalSize!==void 0){let Q=K===!0?T.reduce((j,ce)=>j+ce.size,0):0;if(A=ct(A,G,"max-total-size",j=>(Q+=j.size,Q<=u.value)),A.length===0)return oe()}if(typeof s.filter=="function"){const Q=s.filter(A);A=ct(A,G,"filter",j=>Q.includes(j))}if(s.maxFiles!==void 0){let Q=K===!0?T.length:0;if(A=ct(A,G,"max-files",()=>(Q++,Q<=F.value)),A.length===0)return oe()}if(oe(),A.length!==0)return A}function B(w){Bt(w),a.value!==!0&&(a.value=!0)}function k(w){Ke(w),(w.relatedTarget!==null||la.is.safari!==!0?w.relatedTarget!==v.value:document.elementsFromPoint(w.clientX,w.clientY).includes(v.value)===!1)===!0&&(a.value=!1)}function R(w){Bt(w);const E=w.dataTransfer.files;E.length!==0&&m(null,E),a.value=!1}function $(w){if(a.value===!0)return d("div",{ref:v,class:`q-${w}__dnd absolute-full`,onDragenter:Bt,onDragover:Bt,onDragleave:k,onDrop:R})}return Object.assign(g,{pickFiles:h,addFiles:q}),{pickFiles:h,addFiles:q,onDragover:B,onDragleave:k,processFiles:P,getDndNode:$,maxFilesNumber:F,maxTotalSizeNumber:u}}const ql=De({name:"QFile",inheritAttrs:!1,props:{...aa,...Rl,...Ka,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...ul,...Wa],setup(e,{slots:a,emit:o,attrs:m}){const{proxy:s}=Me(),r=cl(),g=I(null),v=I(!1),b=Al(e),{pickFiles:F,onDragover:u,onDragleave:h,processFiles:q,getDndNode:P}=Ya({editable:r.editable,dnd:v,getFileInput:ie,addFilesToQueue:we}),B=na(e),k=f(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),R=f(()=>Ot(k.value)),$=f(()=>k.value.map(N=>N.name).join(", ")),w=f(()=>ra(k.value.reduce((N,te)=>N+te.size,0))),E=f(()=>({totalSize:w.value,filesNumber:k.value.length,maxFiles:e.maxFiles})),T=f(()=>({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:b.value,...m,id:r.targetUid.value,disabled:r.editable.value!==!0})),K=f(()=>"q-file q-field--auto-height"+(v.value===!0?" q-file--dnd":"")),A=f(()=>e.multiple===!0&&e.append===!0);function G(N){const te=k.value.slice();te.splice(N,1),Q(te)}function oe(N){const te=k.value.indexOf(N);te!==-1&&G(te)}function Q(N){o("update:modelValue",e.multiple===!0?N:N[0])}function j(N){N.keyCode===13&&Tt(N)}function ce(N){(N.keyCode===13||N.keyCode===32)&&F(N)}function ie(){return g.value}function we(N,te){const Z=q(N,te,k.value,A.value),_e=ie();_e!=null&&(_e.value=""),Z!==void 0&&((e.multiple===!0?e.modelValue&&Z.every(c=>k.value.includes(c)):e.modelValue===Z[0])||Q(A.value===!0?k.value.concat(Z):Z))}function Ce(){return[d("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function fe(){if(a.file!==void 0)return k.value.length===0?Ce():k.value.map((te,Z)=>a.file({index:Z,file:te,ref:this}));if(a.selected!==void 0)return k.value.length===0?Ce():a.selected({files:k.value,ref:this});if(e.useChips===!0)return k.value.length===0?Ce():k.value.map((te,Z)=>d(dl,{key:"file-"+Z,removable:r.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{G(Z)}},()=>d("span",{class:"ellipsis",textContent:te.name})));const N=e.displayValue!==void 0?e.displayValue:$.value;return N.length!==0?[d("div",{class:e.inputClass,style:e.inputStyle,textContent:N})]:Ce()}function de(){const N={ref:g,...T.value,...B.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:we};return e.multiple===!0&&(N.multiple=!0),d("input",N)}return Object.assign(r,{fieldClass:K,emitValue:Q,hasValue:R,inputRef:g,innerValue:k,floatingLabel:f(()=>R.value===!0||Ot(e.displayValue)),computedCounter:f(()=>{if(e.counterLabel!==void 0)return e.counterLabel(E.value);const N=e.maxFiles;return`${k.value.length}${N!==void 0?" / "+N:""} (${w.value})`}),getControlChild:()=>P("file"),getControl:()=>{const N={ref:r.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return r.editable.value===!0&&Object.assign(N,{onDragover:u,onDragleave:h,onKeydown:j,onKeyup:ce}),d("div",N,[de()].concat(fe()))}}),Object.assign(s,{removeAtIndex:G,removeFile:oe,getNativeElement:()=>g.value}),dt(s,"nativeEl",()=>g.value),sl(r)}}),Xa={class:"row q-col-gutter-lg"},Ga={class:"col-12 col-md-2"},Ja={class:"fixed-sidebar"},Za={class:"text-h5 font-serif q-mb-xl text-accent text-center"},en={class:"col-12 col-md-10"},tn={key:0},ln={class:"row justify-between items-center q-mb-lg"},an={class:"row items-center justify-center no-wrap q-gutter-x-sm"},nn={key:1},on={class:"row items-center justify-center no-wrap q-gutter-x-sm"},un={key:2},rn={class:"row justify-between items-center q-mb-lg"},sn=["src"],cn={key:3},dn={class:"row justify-between items-center q-mb-lg"},fn=["src"],vn={class:"text-h6"},mn={key:0,class:"q-mb-sm text-center"},gn=["src"],bn={class:"text-h6"},yn={key:0,class:"q-mb-sm text-center"},Sn=["src"],hn={__name:"AdminDashboard",setup(e){const a=fa(),o=oa(),{sendNotification:m}=da(),s=I("bookings"),r=I(!1),g=I(null),v=I([]),b=I([]),F=I([]),u=I(!1),h=I(!1),q=I(!1),P=I(!1),B=I(null),k=I(null),R=f(()=>k.value?v.value.filter(y=>y.staff_id===k.value):[]),$=I({id:null,name:"",category:"",price:0,duration_min:60,description:"",image_url:""}),w=I({id:null,name:"",email:"",role:"",specialties:[],image_url:""}),E=I({id:null,date:"",time:"",status:""}),T=I(null),K=I(null),A=I(!1),G=[{name:"date",label:"Date",field:y=>Pt.formatDate(y.start_time,"YYYY-MM-DD"),sortable:!0,align:"left"},{name:"time",label:"Time",field:y=>Pt.formatDate(y.start_time,"h:mm A"),sortable:!0,align:"left"},{name:"service",label:"Service",field:y=>y.services?.name||"N/A",align:"left"},{name:"staff",label:"Provider",field:y=>y.staff?.name||"Any",align:"left"},{name:"customer",label:"Customer",field:y=>y.profiles?.full_name||y.profiles?.email||"Unknown",align:"left"},{name:"status",label:"Status",field:"status",align:"center",sortable:!0},{name:"actions",label:"Actions",field:"actions",align:"center"}],oe=[{name:"image",label:"",field:"image_url",align:"left"},{name:"name",label:"Name",field:"name",align:"left",sortable:!0},{name:"category",label:"Category",field:"category",align:"left",sortable:!0},{name:"price",label:"Price",field:"price",format:y=>`LKR ${y}`,align:"right"},{name:"actions",label:"Actions",field:"actions",align:"right"}],Q=[{name:"image",label:"",field:"image_url",align:"left"},{name:"name",label:"Name",field:"name",align:"left",sortable:!0},{name:"role",label:"Title",field:"role",align:"left"},{name:"email",label:"Email",field:"email",align:"left"},{name:"specialties",label:"Specialties",field:"specialties",align:"left"},{name:"actions",label:"Actions",field:"actions",align:"right"}];ol(async()=>{const{data:{user:y}}=await me.auth.getUser();if(!y)return;const{data:n}=await me.from("profiles").select("role").eq("id",y.id).single();if(g.value=n?.role,!["admin","staff"].includes(g.value)){a.notify({type:"negative",message:"Unauthorized Access"}),o.push("/dashboard");return}if(j(),g.value==="admin"){ce(),ie();const{data:l}=await me.from("staff").select("id").eq("user_id",y.id).maybeSingle();l&&(k.value=l.id)}});const j=async()=>{r.value=!0;const{data:y,error:n}=await me.from("appointments").select("*, services(name, price), profiles(full_name, email), staff(name)").order("start_time",{ascending:!1});n||(v.value=y),r.value=!1},ce=async()=>{const{data:y}=await me.from("services").select("*").order("name");b.value=y||[]},ie=async()=>{const{data:y}=await me.from("staff").select("*").order("name");F.value=y||[]},we=async y=>{if(!y)return null;const n=y.name.split(".").pop(),D=`${`${Date.now()}_${Math.random().toString(36).substr(2,9)}.${n}`}`,{error:M}=await me.storage.from("salon-images").upload(D,y);if(M)throw M;const{data:ee}=me.storage.from("salon-images").getPublicUrl(D);return ee.publicUrl},Ce=y=>y==="confirmed"?"positive":y==="completed"?"blue":y==="cancelled"?"red":"orange",fe=async(y,n)=>{B.value=y;try{const{error:l}=await me.from("appointments").update({status:n}).eq("id",y);if(l)throw l;await m(n,{id:y});const D=v.value.findIndex(ee=>ee.id===y);D>-1&&(v.value[D].status=n);const M=R.value.findIndex(ee=>ee.id===y);M>-1&&(R.value[M].status=n),a.notify({type:"positive",message:`Booking ${n}`})}catch(l){console.error(l),a.notify({type:"negative",message:"Update failed"})}finally{B.value=null}},de=y=>{const n=new Date(y.start_time);E.value={id:y.id,date:Pt.formatDate(n,"YYYY-MM-DD"),time:Pt.formatDate(n,"HH:mm"),status:y.status},q.value=!0},N=async()=>{A.value=!0;const{id:y,date:n,time:l,status:D}=E.value,[M,ee,be]=n.split("-").map(Number),[He,ge]=l.split(":").map(Number),ke=new Date(M,ee-1,be,He,ge).toISOString(),{error:xe}=await me.from("appointments").update({start_time:ke,status:D}).eq("id",y);A.value=!1,xe?a.notify({type:"negative",message:"Failed to update"}):(q.value=!1,a.notify({type:"positive",message:"Booking updated"}),j(),m("rescheduled",{id:y}))},te=async y=>{a.dialog({title:"Confirm",message:"Delete this appointment permanently?",cancel:!0,persistent:!0,dark:!0}).onOk(async()=>{const{error:n}=await me.from("appointments").delete().eq("id",y);n?a.notify({type:"negative",message:"Failed to delete"}):(a.notify({type:"positive",message:"Appointment deleted"}),j())})},Z=(y=null)=>{P.value=!!y,$.value=y?{...y}:{name:"",category:"",price:0,duration_min:60,description:"",image_url:""},T.value=null,u.value=!0},_e=async()=>{A.value=!0;try{let y=$.value.image_url;T.value&&(y=await we(T.value));const n={...$.value,image_url:y};delete n.id;let l;if(P.value?{error:l}=await me.from("services").update(n).eq("id",$.value.id):{error:l}=await me.from("services").insert(n),l)throw l;a.notify({type:"positive",message:"Service saved"}),u.value=!1,ce()}catch(y){a.notify({type:"negative",message:"Error saving service: "+y.message})}finally{A.value=!1}},c=async y=>{if(!confirm("Are you sure?"))return;const{error:n}=await me.from("services").delete().eq("id",y);n||ce()},C=(y=null)=>{P.value=!!y,w.value=y?{...y}:{name:"",email:"",role:"",specialties:[],image_url:""},K.value=null,h.value=!0},H=async()=>{A.value=!0;try{let y=w.value.image_url;K.value&&(y=await we(K.value));const n={...w.value,image_url:y};delete n.id;let l;if(P.value?{error:l}=await me.from("staff").update(n).eq("id",w.value.id):{error:l}=await me.from("staff").insert(n),l)throw l;a.notify({type:"positive",message:"Staff saved. Note: User must sign up with this email."}),h.value=!1,ie()}catch(y){a.notify({type:"negative",message:"Error saving staff: "+y.message})}finally{A.value=!1}},W=async y=>{if(!confirm("Are you sure?"))return;const{error:n}=await me.from("staff").delete().eq("id",y);n||ie()};return(y,n)=>(se(),Be(ca,{class:"q-pa-md bg-grey-10 text-white"},{default:_(()=>[ue("div",Xa,[ue("div",Ga,[ue("div",Ja,[ue("div",Za,rt(g.value==="admin"?"Admin Panel":"Staff Portal"),1),S(Bl,{padding:"",class:"rounded-borders text-grey-4"},{default:_(()=>[Ze((se(),Be(wt,{clickable:"",active:s.value==="bookings",onClick:n[0]||(n[0]=l=>s.value="bookings"),"active-class":"text-accent bg-grey-9",class:"radius-md q-mb-sm"},{default:_(()=>[S(Le,{avatar:""},{default:_(()=>[S(Ne,{name:"calendar_month"})]),_:1}),S(Le,null,{default:_(()=>[...n[23]||(n[23]=[Se("Bookings",-1)])]),_:1})]),_:1},8,["active"])),[[qt]]),k.value?Ze((se(),Be(wt,{key:0,clickable:"",active:s.value==="myschedule",onClick:n[1]||(n[1]=l=>s.value="myschedule"),"active-class":"text-accent bg-grey-9",class:"radius-md q-mb-sm"},{default:_(()=>[S(Le,{avatar:""},{default:_(()=>[S(Ne,{name:"perm_contact_calendar"})]),_:1}),S(Le,null,{default:_(()=>[...n[24]||(n[24]=[Se("My Schedule",-1)])]),_:1})]),_:1},8,["active"])),[[qt]]):pe("",!0),g.value==="admin"?(se(),Te(Ft,{key:1},[Ze((se(),Be(wt,{clickable:"",active:s.value==="services",onClick:n[2]||(n[2]=l=>s.value="services"),"active-class":"text-accent bg-grey-9",class:"radius-md q-mb-sm"},{default:_(()=>[S(Le,{avatar:""},{default:_(()=>[S(Ne,{name:"spa"})]),_:1}),S(Le,null,{default:_(()=>[...n[25]||(n[25]=[Se("Services",-1)])]),_:1})]),_:1},8,["active"])),[[qt]]),Ze((se(),Be(wt,{clickable:"",active:s.value==="staff",onClick:n[3]||(n[3]=l=>s.value="staff"),"active-class":"text-accent bg-grey-9",class:"radius-md q-mb-sm"},{default:_(()=>[S(Le,{avatar:""},{default:_(()=>[S(Ne,{name:"people"})]),_:1}),S(Le,null,{default:_(()=>[...n[26]||(n[26]=[Se("Staff",-1)])]),_:1})]),_:1},8,["active"])),[[qt]])],64)):pe("",!0)]),_:1})])]),ue("div",en,[s.value==="bookings"?(se(),Te("div",tn,[ue("div",ln,[n[27]||(n[27]=ue("div",{class:"text-h4 font-serif"},"Manage Appointments",-1)),S(X,{flat:"",icon:"refresh",onClick:j})]),S(At,{dark:"",rows:v.value,columns:G,"row-key":"id",class:"bg-grey-9 shadow-10 text-grey-3 header-accent",loading:r.value},{"body-cell-status":_(l=>[S($e,{props:l},{default:_(()=>[S(wl,{color:Ce(l.value),class:"q-pa-xs"},{default:_(()=>[Se(rt(l.value.toUpperCase()),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-actions":_(l=>[S($e,{props:l},{default:_(()=>[ue("div",an,[l.row.status!=="cancelled"&&l.row.status!=="completed"?(se(),Te(Ft,{key:0},[l.row.status==="pending"?(se(),Be(X,{key:0,dense:"",unelevated:"",size:"sm",color:"positive",icon:"check",label:"Confirm",loading:B.value===l.row.id,onClick:D=>fe(l.row.id,"confirmed")},{default:_(()=>[S(Qe,null,{default:_(()=>[...n[28]||(n[28]=[Se("Confirm Booking",-1)])]),_:1})]),_:1},8,["loading","onClick"])):pe("",!0),l.row.status==="confirmed"?(se(),Be(X,{key:1,dense:"",unelevated:"",size:"sm",color:"blue",icon:"done_all",label:"Complete",loading:B.value===l.row.id,onClick:D=>fe(l.row.id,"completed")},{default:_(()=>[S(Qe,null,{default:_(()=>[...n[29]||(n[29]=[Se("Mark Completed",-1)])]),_:1})]),_:1},8,["loading","onClick"])):pe("",!0),S(X,{dense:"",outline:"",size:"sm",color:"orange",icon:"close",loading:B.value===l.row.id,onClick:D=>fe(l.row.id,"cancelled"),label:"Cancel"},null,8,["loading","onClick"]),S(Zt,{vertical:"",color:"grey-8",class:"q-mx-sm"})],64)):pe("",!0),S(X,{flat:"",round:"",dense:"",color:"grey-4",icon:"edit",size:"sm",onClick:D=>de(l.row)},{default:_(()=>[S(Qe,null,{default:_(()=>[...n[30]||(n[30]=[Se("Edit Details",-1)])]),_:1})]),_:1},8,["onClick"]),S(X,{flat:"",round:"",dense:"",color:"negative",icon:"delete",size:"sm",onClick:D=>te(l.row.id)},{default:_(()=>[S(Qe,null,{default:_(()=>[...n[31]||(n[31]=[Se("Delete Record",-1)])]),_:1})]),_:1},8,["onClick"])])]),_:2},1032,["props"])]),_:1},8,["rows","loading"])])):pe("",!0),s.value==="myschedule"?(se(),Te("div",nn,[n[36]||(n[36]=ue("div",{class:"row justify-between items-center q-mb-lg"},[ue("div",{class:"text-h4 font-serif"},"My Personal Schedule")],-1)),S(At,{dark:"",rows:R.value,columns:G,"row-key":"id",class:"bg-grey-9 shadow-10 text-grey-3 header-accent",loading:r.value},{"body-cell-status":_(l=>[S($e,{props:l},{default:_(()=>[S(wl,{color:Ce(l.value),class:"q-pa-xs"},{default:_(()=>[Se(rt(l.value.toUpperCase()),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-actions":_(l=>[S($e,{props:l},{default:_(()=>[ue("div",on,[l.row.status!=="cancelled"&&l.row.status!=="completed"?(se(),Te(Ft,{key:0},[l.row.status==="pending"?(se(),Be(X,{key:0,dense:"",unelevated:"",size:"sm",color:"positive",icon:"check",label:"Confirm",loading:B.value===l.row.id,onClick:D=>fe(l.row.id,"confirmed")},{default:_(()=>[S(Qe,null,{default:_(()=>[...n[32]||(n[32]=[Se("Confirm Booking",-1)])]),_:1})]),_:1},8,["loading","onClick"])):pe("",!0),l.row.status==="confirmed"?(se(),Be(X,{key:1,dense:"",unelevated:"",size:"sm",color:"blue",icon:"done_all",label:"Complete",loading:B.value===l.row.id,onClick:D=>fe(l.row.id,"completed")},{default:_(()=>[S(Qe,null,{default:_(()=>[...n[33]||(n[33]=[Se("Mark Completed",-1)])]),_:1})]),_:1},8,["loading","onClick"])):pe("",!0),S(X,{dense:"",outline:"",size:"sm",color:"orange",icon:"close",loading:B.value===l.row.id,onClick:D=>fe(l.row.id,"cancelled"),label:"Cancel"},null,8,["loading","onClick"]),S(Zt,{vertical:"",color:"grey-8",class:"q-mx-sm"})],64)):pe("",!0),S(X,{flat:"",round:"",dense:"",color:"grey-4",icon:"edit",size:"sm",onClick:D=>de(l.row)},{default:_(()=>[S(Qe,null,{default:_(()=>[...n[34]||(n[34]=[Se("Edit Details",-1)])]),_:1})]),_:1},8,["onClick"]),S(X,{flat:"",round:"",dense:"",color:"negative",icon:"delete",size:"sm",onClick:D=>te(l.row.id)},{default:_(()=>[S(Qe,null,{default:_(()=>[...n[35]||(n[35]=[Se("Delete Record",-1)])]),_:1})]),_:1},8,["onClick"])])]),_:2},1032,["props"])]),_:1},8,["rows","loading"])])):pe("",!0),s.value==="services"?(se(),Te("div",un,[ue("div",rn,[n[37]||(n[37]=ue("div",{class:"text-h4 font-serif"},"Service Menu",-1)),S(X,{color:"accent",icon:"add",label:"Add Service",onClick:n[4]||(n[4]=l=>Z())})]),S(At,{dark:"",rows:b.value,columns:oe,"row-key":"id",class:"bg-grey-9 shadow-10 text-grey-3 header-accent",loading:r.value},{"body-cell-image":_(l=>[S($e,{props:l},{default:_(()=>[S(hl,{rounded:"",size:"40px"},{default:_(()=>[ue("img",{src:l.row.image_url||"https://cdn.quasar.dev/img/image-src.png"},null,8,sn)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-actions":_(l=>[S($e,{props:l},{default:_(()=>[S(X,{flat:"",round:"",color:"white",icon:"edit",size:"sm",onClick:D=>Z(l.row)},null,8,["onClick"]),S(X,{flat:"",round:"",color:"negative",icon:"delete",size:"sm",onClick:D=>c(l.row.id)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","loading"])])):pe("",!0),s.value==="staff"?(se(),Te("div",cn,[ue("div",dn,[n[38]||(n[38]=ue("div",{class:"text-h4 font-serif"},"Staff Management",-1)),S(X,{color:"accent",icon:"add",label:"Add Staff",onClick:n[5]||(n[5]=l=>C())})]),S(At,{dark:"",rows:F.value,columns:Q,"row-key":"id",class:"bg-grey-9 shadow-10 text-grey-3 header-accent",loading:r.value},{"body-cell-image":_(l=>[S($e,{props:l},{default:_(()=>[S(hl,{size:"40px"},{default:_(()=>[ue("img",{src:l.row.image_url},null,8,fn)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-specialties":_(l=>[S($e,{props:l},{default:_(()=>[(se(!0),Te(Ft,null,ia(l.row.specialties,D=>(se(),Be(dl,{key:D,dense:"",color:"grey-8","text-color":"white"},{default:_(()=>[Se(rt(D),1)]),_:2},1024))),128))]),_:2},1032,["props"])]),"body-cell-actions":_(l=>[S($e,{props:l},{default:_(()=>[S(X,{flat:"",round:"",color:"white",icon:"edit",size:"sm",onClick:D=>C(l.row)},null,8,["onClick"]),S(X,{flat:"",round:"",color:"negative",icon:"delete",size:"sm",onClick:D=>W(l.row.id)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","loading"])])):pe("",!0)])]),S(zt,{modelValue:u.value,"onUpdate:modelValue":n[12]||(n[12]=l=>u.value=l)},{default:_(()=>[S(Kt,{class:"bg-grey-9 text-white",style:{"min-width":"400px"}},{default:_(()=>[S(st,null,{default:_(()=>[ue("div",vn,rt(P.value?"Edit":"Add")+" Service",1)]),_:1}),S(st,{class:"q-gutter-md"},{default:_(()=>[S(ze,{dark:"",filled:"",modelValue:$.value.name,"onUpdate:modelValue":n[6]||(n[6]=l=>$.value.name=l),label:"Service Name"},null,8,["modelValue"]),S(ze,{dark:"",filled:"",modelValue:$.value.category,"onUpdate:modelValue":n[7]||(n[7]=l=>$.value.category=l),label:"Category (Hair, Skin, Spa)"},null,8,["modelValue"]),S(ze,{dark:"",filled:"",modelValue:$.value.price,"onUpdate:modelValue":n[8]||(n[8]=l=>$.value.price=l),modelModifiers:{number:!0},type:"number",label:"Price (LKR)"},null,8,["modelValue"]),S(ze,{dark:"",filled:"",modelValue:$.value.duration_min,"onUpdate:modelValue":n[9]||(n[9]=l=>$.value.duration_min=l),modelModifiers:{number:!0},type:"number",label:"Duration (min)"},null,8,["modelValue"]),S(ze,{dark:"",filled:"",modelValue:$.value.description,"onUpdate:modelValue":n[10]||(n[10]=l=>$.value.description=l),type:"textarea",label:"Description"},null,8,["modelValue"]),$.value.image_url?(se(),Te("div",mn,[ue("img",{src:$.value.image_url,style:{"max-height":"100px","border-radius":"8px"}},null,8,gn)])):pe("",!0),S(ql,{dark:"",filled:"",modelValue:T.value,"onUpdate:modelValue":n[11]||(n[11]=l=>T.value=l),label:"Upload Image",accept:"image/*"},{prepend:_(()=>[S(Ne,{name:"cloud_upload"})]),_:1},8,["modelValue"])]),_:1}),S(Wt,{align:"right"},{default:_(()=>[Ze(S(X,{flat:"",label:"Cancel",color:"white"},null,512),[[Yt]]),S(X,{flat:"",label:"Save",color:"accent",loading:A.value,onClick:_e},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),S(zt,{modelValue:h.value,"onUpdate:modelValue":n[18]||(n[18]=l=>h.value=l)},{default:_(()=>[S(Kt,{class:"bg-grey-9 text-white",style:{"min-width":"400px"}},{default:_(()=>[S(st,null,{default:_(()=>[ue("div",bn,rt(P.value?"Edit":"Add")+" Staff Member",1)]),_:1}),S(st,{class:"q-gutter-md"},{default:_(()=>[S(ze,{dark:"",filled:"",modelValue:w.value.name,"onUpdate:modelValue":n[13]||(n[13]=l=>w.value.name=l),label:"Full Name"},null,8,["modelValue"]),S(ze,{dark:"",filled:"",modelValue:w.value.email,"onUpdate:modelValue":n[14]||(n[14]=l=>w.value.email=l),label:"Email (For Login)",hint:"User must sign up with this email"},null,8,["modelValue"]),S(ze,{dark:"",filled:"",modelValue:w.value.role,"onUpdate:modelValue":n[15]||(n[15]=l=>w.value.role=l),label:"Role Title (e.g. Senior Stylist)"},null,8,["modelValue"]),S(tl,{dark:"",filled:"",modelValue:w.value.specialties,"onUpdate:modelValue":n[16]||(n[16]=l=>w.value.specialties=l),multiple:"",options:["Hair","Skin","Spa","Beard"],label:"Specialties"},null,8,["modelValue"]),w.value.image_url?(se(),Te("div",yn,[ue("img",{src:w.value.image_url,style:{"max-height":"100px","border-radius":"50%"}},null,8,Sn)])):pe("",!0),S(ql,{dark:"",filled:"",modelValue:K.value,"onUpdate:modelValue":n[17]||(n[17]=l=>K.value=l),label:"Upload Photo",accept:"image/*"},{prepend:_(()=>[S(Ne,{name:"cloud_upload"})]),_:1},8,["modelValue"])]),_:1}),S(Wt,{align:"right"},{default:_(()=>[Ze(S(X,{flat:"",label:"Cancel",color:"white"},null,512),[[Yt]]),S(X,{flat:"",label:"Save",color:"accent",loading:A.value,onClick:H},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),S(zt,{modelValue:q.value,"onUpdate:modelValue":n[22]||(n[22]=l=>q.value=l)},{default:_(()=>[S(Kt,{class:"bg-grey-9 text-white",style:{"min-width":"400px"}},{default:_(()=>[S(st,null,{default:_(()=>[...n[39]||(n[39]=[ue("div",{class:"text-h6"},"Edit Appointment",-1)])]),_:1}),S(st,{class:"q-gutter-md"},{default:_(()=>[S(ze,{dark:"",filled:"",modelValue:E.value.date,"onUpdate:modelValue":n[19]||(n[19]=l=>E.value.date=l),type:"date",label:"Date"},null,8,["modelValue"]),S(ze,{dark:"",filled:"",modelValue:E.value.time,"onUpdate:modelValue":n[20]||(n[20]=l=>E.value.time=l),type:"time",label:"Time"},null,8,["modelValue"]),S(tl,{dark:"",filled:"",modelValue:E.value.status,"onUpdate:modelValue":n[21]||(n[21]=l=>E.value.status=l),options:["pending","confirmed","completed","cancelled"],label:"Status"},null,8,["modelValue"])]),_:1}),S(Wt,{align:"right"},{default:_(()=>[Ze(S(X,{flat:"",label:"Cancel",color:"white"},null,512),[[Yt]]),S(X,{flat:"",label:"Update",color:"accent",loading:A.value,onClick:N},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},Fn=sa(hn,[["__scopeId","data-v-e569149c"]]);export{Fn as default};
